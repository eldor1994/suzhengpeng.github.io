<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="generator" content="Jekyll">

	<title>使用形态学滤波对图像进行边缘及角点检测 - Su'S Blog - SuZhengpeng.COM </title>
  <meta name="description" content="使用 Opencv 对图像进行边缘提取与角点检测 ">

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/css/main.css">

	<!-- RSS -->
	<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <style type="text/css">

</style>
<!-- MathJax -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$', '$'],['\\(', '\\)']],
            displayMath: [['$$', '$$'],["\\[", "\\]"]],
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'],
            processEscapes: true
        },
        TeX: {
            extensions: ["AMSmath.js", "AMSsymbols.js"],
            equationNumbers: { autoNumber: ["AMS"],
			useLabelIds: true
            },
            Macros: {hfill: "{}"}
        },
        "HTML-CSS": {
            linebreaks: {automatic: true},
            availableFonts: ["TeX"],
            scale: 110
        },
        SVG: {
            linebreaks: {automatic: true}
        }
    });
</script>
<script type="text/javascript"
   src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
<script>
var init = function() {
    var center = new qq.maps.LatLng(37.916527,106.397128);
	//山东省
	var tsingtao = new qq.maps.LatLng(36.065162,120.312567);
	var jinan = new qq.maps.LatLng(36.670966,116.990919);
	//陕西省
	var xian = new qq.maps.LatLng(34.276936,108.962660);
	var qianxian = new qq.maps.LatLng(34.532015,108.260822);
	//河南省
	var xinan = new qq.maps.LatLng(34.718308,112.154574);
	var zhengzhou = new qq.maps.LatLng(34.745509,113.657212);
	//上海市
	var shanghai = new qq.maps.LatLng(31.250085,121.455917);
	//江苏省
	var kunshan = new qq.maps.LatLng(31.366225,120.957520);
	var fengxian = new qq.maps.LatLng(34.701436,116.649528);
	
    var map = new qq.maps.Map(document.getElementById('container-map'),{
        center: center,
        zoom: 7
    });
	   //获取城市列表接口设置中心点
    citylocation = new qq.maps.CityService({
        complete : function(result){
            map.setCenter(result.detail.latLng);
        }
    });
    //调用searchLocalCity();方法    根据用户IP查询城市信息。
    citylocation.searchLocalCity();
	
		//添加到提示窗
	var info = new qq.maps.InfoWindow({
        map: map
    });
    //青岛
    var marker = new qq.maps.Marker({
        position: tsingtao,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="/tag/tsingtao.html">山东省青岛市</a><br> 17 Jun 2017 <a href="/laoshan-jufeng">崂山巨峰游览小记</a> <br>28 Apr 2017 <a href="/tbm-and-signal-hill">青啤博物馆与信号山公园</a> <br>23 Apr 2017 <a href="/railway-station-to-54-square">红石绿海</a> <br>18 Mar 2017 <a href="/night-54-square">夜游五四广场</a> <br>                 </small>');
        info.setPosition(tsingtao); 
    });
	//济南
	    var marker = new qq.maps.Marker({
        position: jinan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="/tag/ji%27nan.html">山东省济南市</a><br>     15 Apr 2017 <a href="/welcome-to-the-hell">Welcome to the hell</a> <br>              </small>');
        info.setPosition(jinan); 
    });
	//xian
	    var marker = new qq.maps.Marker({
        position: xian,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="/tag/xi%27an.html">陕西省西安市</a><br>    02 Mar 2018 <a href="/xian-lantern-festival">2018年大唐芙蓉园新春灯会</a> <br> 10 Dec 2017 <a href="/yang-hucheng-general-mausoleum">杨虎城将军陵园</a> <br> 14 Nov 2017 <a href="/changan-silk-road">长安丝路东西风——文物特展</a> <br> 14 Nov 2017 <a href="/tressure-collection-10-years">十年珍藏——西安博物院新入展文物精品展</a> <br> 05 Aug 2017 <a href="/the-site-of-weiyang-palace">汉长安城未央宫遗址</a> <br> 31 Mar 2017 <a href="/roaming-xian">西安漫行</a> <br>               </small>');
        info.setPosition(xian); 
    });
	//xin-an
	    var marker = new qq.maps.Marker({
        position: xinan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="#">河南省新安县</a></small>');
        info.setPosition(xinan); 
    });
	//shanghai
	    var marker = new qq.maps.Marker({
        position: shanghai,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="#">上海市</a></small>');
        info.setPosition(shanghai); 
    });
	//kunshan
	    var marker = new qq.maps.Marker({
        position: kunshan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="#">江苏省昆山市</a></small>');
        info.setPosition(kunshan); 
    });
	//fengxian
	    var marker = new qq.maps.Marker({
        position: fengxian,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small>📍 <a href="#">江苏省丰县</a></small>');
        info.setPosition(fengxian); 
    });
		//郑州 zhengzhou
	    var marker = new qq.maps.Marker({
        position: zhengzhou,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
                info.setContent('<small>📍 <a href="/tag/zheng%27zhou.html">河南省郑州市</a><br>              03 Oct 2017 <a href="/zhengzhou">2017年十一：大象中原 郑州行</a> <br>     </small>');
        info.setPosition(zhengzhou); 
    });
	//乾县 Qianxian
	    var marker = new qq.maps.Marker({
        position: qianxian,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
                info.setContent('<small>📍 <a href="/tag/qian%27xian.html">陕西省乾县</a><br>             30 Sep 2017 <a href="/qianling">2017年十一：乾陵</a> <br>      </small>');
        info.setPosition(qianxian); 
    });
	
	
}

</script>  

<script type="text/javascript"<src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>  
		</head>


<body>
	<div id="wrap">
	  	
	  	<!-- Navigation -->
	  	

<nav id="nav">

    <!-- Nav links -->
	  

  
  <!-- Nav footer 
	
	  <footer><span>

<div class="footer" id="nav-links">

	<div class="footer-one">
	
		<div class="footer-ico"></div>
		<br>
		Suzhengpeng @ Xidian University 
		<br>
			 <div class="footer-power">
		Proudly hosted by Github and powered by Jekyll </div>
		<br>
	
	</div>
	
	<div class="footer-two">
	
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		
			<a href="/pages/page/about" title="About">About</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		

	    
		
			<a href="/pages/page/contact" title="Contact">Contact</a>&nbsp;&nbsp;<br>
		

	    
		
			<a href="/pages/page/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		
			<a href="/pages/page/link" title="Links">Links</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		<br>

	</div>
	<div class="footer-two">
					
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			<a href="/pages/data/BookList" title="Booklist 2018">Booklist 2018</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
			<a href="/pages/data/computerVision" title="CV-Research">CV-Research</a>&nbsp;&nbsp;
		
				
				
			<a href="/pages/data/computerVisionBookList" title="Book List">Book List</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
	</div>
	<div class="footer-two-1">
	<b><small>Friends Links</small></b>
					
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			<br><a href="http://www.yushuai.me/" title="小奥の专属领地" target="_blank">小奥の专属领地</a>&nbsp;&nbsp;
		
				
				
			<br><a href="https://www.zning.net.cn/" title="张宁网" target="_blank">张宁网</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
	</div>
	<div class="footer-three">
			<div class="footer-qrcode">
			<img src="http://tool.oschina.net/action/qrcode/generate?data=http://www.suzhengpeng.com/edge-extraction-and-corner-detection&output=image%2Fgif&error=L&type=0&margin=0&size=4">
			</div><br>


	</div>


</div>
</span>



 </footer>
	-->
 <a href="/"><div class="footer-ico">
</div></a>
<br><br>
	<div id="nav-list">
		<!-- Nav pages -->

		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
			<a href="/pages/page/about" title="About">About</a>&nbsp;&nbsp;
		
	    
		
	    
		
	    
		
	    
		
			<a href="/pages/page/contact" title="Contact">Contact</a>&nbsp;&nbsp;
		
	    
		
			<a href="/pages/page/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;
		
	    
		
	    
		
	    
		
			<a href="/pages/page/link" title="Links">Links</a>&nbsp;&nbsp;
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		
	    
		<br>

	 <br>Suzhengpeng @ Tsingtao<br><br>
	 <div class="footer-power">
Proudly hosted by Github and powered by Jekyll <br><br>
</div>
    </div>


 <div class="footer-ico-con">
 <table><tr>
<td><a href="http://space.bilibili.com/15155880" target="_blank"><img src="/img/ico/bilibili.ico"/></a> </td>
<td><a href="https://github.com/suzhengpeng" target="_blank"><img src="/img/ico/github.ico"/></a> </td>
<td><a href="http://weibo.com/sdustem" target="_blank"><img src="/img/ico/weibo.ico"/></a> </td>
<td><a href="https://www.douban.com/people/imsus/" target="_blank"><img src="/img/ico/douban.ico"/></a> </td>
<td><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261868763'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261868763%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></td>
</tr></table>
</div> 


<small>
		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
			<a href="/pages/data/BookList" title="Booklist 2018">Booklist 2018</a>&nbsp;&nbsp;
		
	  		
				
	  		
				
	  		
				
			<a href="/pages/data/computerVision" title="CV-Research">CV-Research</a>&nbsp;&nbsp;
		
	  		
				
			<a href="/pages/data/computerVisionBookList" title="Book List">Book List</a>&nbsp;&nbsp;
		
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  		
				
	  
	 <br> 
</small>
 
<br>
	</nav>
    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>

      <!-- Header -->
      
        <header id="header" class="parent justify-spaceBetween">
  <div class="inner w100 relative">
    <div class="f-logo">  
      <a href="/">
        <h1>
          <span>Su</span>'S Blog
        </h1>
      </a>
    </div>

  </div>
</header>




      

    <!-- Main content -->
	  <div id="container">
		  
		<main>

			<article id="post-page">
	
	02 Mar 2018
	
	<h3>使用形态学滤波对图像进行边缘及角点检测 </h3>
	<!-- JiaThis Button BEGIN -->
	
<div style="padding: 10px; background:#fff;">

	<div style="position: relative; 
				border: 2px solid #E9F01D; 
				padding: 10px; 
				padding-bottom:20px;
				width:60%;
				min-width:300px;
				background:#E9F01D;
				color:#404040;
				border-radius:4px;
				" >
		<span style="position: absolute; 
					left: 30px; top: -32px; 
					width: 0; height: 0; 
					font-size: 0; 
					border-width: 16px; 
					border-style: dashed dashed solid dashed; 
					border-color: transparent transparent #E9F01D transparent;" ></span>
<div class="bshare-custom"><div class="bsPromo bsPromo2"></div>
使用 Opencv 对图像进行边缘提取与角点检测<br><br> 
分享到：<a title="分享到微信" class="bshare-weixin"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到Facebook" class="bshare-facebook"></a><a title="分享到Twitter" class="bshare-twitter"></a><a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a><a title="分享到豆瓣" class="bshare-douban"></a><a title="分享到人人网" class="bshare-renren"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a><span class="BSHARE_COUNT bshare-share-count">0</span><br><br> 请保证您的浏览器支持MathJax插件，以免数学公式无法显示</div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=b17f1493-0201-428b-be37-0724d8ab69a2&amp;pophcol=3&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>
	</div>
</div>

	

<!-- JiaThis Button END -->
<br>
	<div class="content">

		<p><img src="/img/20180303/building.jpg" alt="avatar" /></p>

<p><img src="/img/20180303/result.jpg" alt="avatar" /></p>

<p>实现：</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">morpho</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
	<span class="n">morpho</span><span class="p">()</span> <span class="o">:</span>
		<span class="n">threshold</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> 
		<span class="n">cross</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CV_8U</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
		<span class="n">diamond</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CV_8U</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
		<span class="n">square</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CV_8U</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
		<span class="n">x</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">CV_8U</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">cross</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="n">cross</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">diamond</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">x</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="n">x</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">getEdges</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">setThreshold</span><span class="p">(</span><span class="kt">int</span> <span class="n">t</span><span class="p">);</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">getConers</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">);</span>
	<span class="kt">void</span> <span class="n">drawOnImage</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&amp;</span><span class="n">binary</span><span class="p">,</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">);</span>

<span class="k">private</span><span class="o">:</span>
	<span class="kt">int</span> <span class="n">threshold</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">cross</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">diamond</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">square</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">x</span><span class="p">;</span>

	<span class="kt">void</span> <span class="n">applyThreshold</span><span class="p">(</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">result</span><span class="p">);</span>

<span class="p">};</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">morpho</span><span class="o">::</span><span class="n">getEdges</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">//得到梯度图
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">result</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span><span class="n">cv</span><span class="o">::</span><span class="n">MORPH_GRADIENT</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="p">());</span>
	<span class="n">applyThreshold</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">morpho</span><span class="o">::</span><span class="n">applyThreshold</span><span class="p">(</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">threshold</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">cv</span><span class="o">::</span><span class="n">threshold</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">THRESH_BINARY_INV</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">morpho</span><span class="o">::</span><span class="n">setThreshold</span><span class="p">(</span><span class="kt">int</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">threshold</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">morpho</span><span class="o">::</span><span class="n">getConers</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">)</span> <span class="p">{</span>
	
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">result</span><span class="p">;</span>
	<span class="c1">// 使用交叉结构 膨胀 Dilate with a cross	
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">dilate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">cross</span><span class="p">);</span>
	<span class="c1">// 使用菱形结构 腐蚀 Erode with a diamond
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">erode</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">diamond</span><span class="p">);</span>
	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"result1"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"result1"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">result2</span><span class="p">;</span>
	<span class="c1">// 使用x形结构 膨胀 Dilate with a X	
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">dilate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">result2</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
	<span class="c1">// 使用方形结构 腐蚀 Erode with a square
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">erode</span><span class="p">(</span><span class="n">result2</span><span class="p">,</span> <span class="n">result2</span><span class="p">,</span> <span class="n">square</span><span class="p">);</span>
	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"result2"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"result2"</span><span class="p">,</span> <span class="n">result2</span><span class="p">);</span>
	<span class="c1">// 通过对两个结果求差 得到角点分布 Corners are obtained by differencing the two closed images
</span>	<span class="n">cv</span><span class="o">::</span><span class="n">absdiff</span><span class="p">(</span><span class="n">result2</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>

	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"result3"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"result3"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>

	<span class="c1">// Apply threshold to obtain a binary image
</span>	<span class="n">applyThreshold</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>

	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"result4"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"result4"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">morpho</span><span class="o">::</span><span class="n">drawOnImage</span><span class="p">(</span><span class="k">const</span> <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="o">&amp;</span><span class="n">binary</span><span class="p">,</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="o">&amp;</span><span class="n">image</span><span class="p">)</span> <span class="p">{</span>  

	<span class="n">cv</span><span class="o">::</span><span class="n">Mat_</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;::</span><span class="n">const_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">binary</span><span class="p">.</span><span class="n">begin</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">();</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat_</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;::</span><span class="n">const_iterator</span> <span class="n">itend</span> <span class="o">=</span> <span class="n">binary</span><span class="p">.</span><span class="n">end</span><span class="o">&lt;</span><span class="n">uchar</span><span class="o">&gt;</span><span class="p">();</span>

	<span class="c1">// for each pixel	
</span>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">itend</span><span class="p">;</span> <span class="o">++</span><span class="n">it</span><span class="p">,</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!*</span><span class="n">it</span><span class="p">)</span>
			<span class="n">cv</span><span class="o">::</span><span class="n">circle</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Point</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">step</span><span class="p">),</span> <span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">step</span><span class="p">)),</span> <span class="mi">5</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">Scalar</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]){</span>

	<span class="n">morpho</span> <span class="n">mop</span><span class="p">;</span>
	<span class="n">Mat</span> <span class="n">image</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">"A://len_std//building.jpg"</span><span class="p">);</span>

	<span class="n">Mat</span> <span class="n">imageGray</span><span class="p">;</span>
	<span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">imageGray</span><span class="p">,</span> <span class="n">CV_BGR2GRAY</span><span class="p">);</span>
	<span class="n">mop</span><span class="p">.</span><span class="n">setThreshold</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">edges</span><span class="p">;</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">corners</span><span class="p">;</span>
	
	<span class="c1">//提取边缘
</span>	<span class="n">edges</span> <span class="o">=</span> <span class="n">mop</span><span class="p">.</span><span class="n">getEdges</span><span class="p">(</span><span class="n">imageGray</span><span class="p">);</span>
	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"Edg"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"Edg"</span><span class="p">,</span> <span class="n">edges</span><span class="p">);</span>
	
	<span class="c1">//提取角点
</span>	<span class="n">mop</span><span class="p">.</span><span class="n">setThreshold</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">corners</span> <span class="o">=</span> <span class="n">mop</span><span class="p">.</span><span class="n">getConers</span><span class="p">(</span><span class="n">imageGray</span><span class="p">);</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">morphologyEx</span><span class="p">(</span><span class="n">corners</span><span class="p">,</span> <span class="n">corners</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">MORPH_TOPHAT</span><span class="p">,</span> <span class="n">Mat</span><span class="p">());</span>
	<span class="n">cv</span><span class="o">::</span><span class="n">threshold</span><span class="p">(</span><span class="n">corners</span><span class="p">,</span> <span class="n">corners</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">THRESH_BINARY_INV</span><span class="p">);</span>
	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"Corn"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"Corn"</span><span class="p">,</span> <span class="n">corners</span><span class="p">);</span>
	<span class="n">mop</span><span class="p">.</span><span class="n">drawOnImage</span><span class="p">(</span><span class="n">corners</span><span class="p">,</span> <span class="n">imageGray</span><span class="p">);</span>
	<span class="c1">//mop.drawOnImage(corners, image);
</span>	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"Image"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"Image"</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
	<span class="n">namedWindow</span><span class="p">(</span><span class="s">"imageGray"</span><span class="p">);</span>
	<span class="n">imshow</span><span class="p">(</span><span class="s">"imageGray"</span><span class="p">,</span> <span class="n">imageGray</span><span class="p">);</span>
	<span class="n">cvWaitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

		
	</div>
	<div id="posts-out-tags"># <a href="/tag/opencv.html" rel="tag">OpenCV</a> </div> 
</article>



	  </main>
		
		  <!-- Pagination links -->
      

	  </div>
	    
	    <!-- Footer -->
	    <footer><span>

<div class="footer" id="nav-links">

	<div class="footer-one">
	
		<div class="footer-ico"></div>
		<br>
		Suzhengpeng @ Xidian University 
		<br>
			 <div class="footer-power">
		Proudly hosted by Github and powered by Jekyll </div>
		<br>
	
	</div>
	
	<div class="footer-two">
	
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		
			<a href="/pages/page/about" title="About">About</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		

	    
		
			<a href="/pages/page/contact" title="Contact">Contact</a>&nbsp;&nbsp;<br>
		

	    
		
			<a href="/pages/page/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		
			<a href="/pages/page/link" title="Links">Links</a>&nbsp;&nbsp;<br>
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		

	    
		<br>

	</div>
	<div class="footer-two">
					
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			<a href="/pages/data/BookList" title="Booklist 2018">Booklist 2018</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
			<a href="/pages/data/computerVision" title="CV-Research">CV-Research</a>&nbsp;&nbsp;
		
				
				
			<a href="/pages/data/computerVisionBookList" title="Book List">Book List</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
	</div>
	<div class="footer-two-1">
	<b><small>Friends Links</small></b>
					
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			<br><a href="http://www.yushuai.me/" title="小奥の专属领地" target="_blank">小奥の专属领地</a>&nbsp;&nbsp;
		
				
				
			<br><a href="https://www.zning.net.cn/" title="张宁网" target="_blank">张宁网</a>&nbsp;&nbsp;
		
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
	</div>
	<div class="footer-three">
			<div class="footer-qrcode">
			<img src="http://tool.oschina.net/action/qrcode/generate?data=http://www.suzhengpeng.com/edge-extraction-and-corner-detection&output=image%2Fgif&error=L&type=0&margin=0&size=4">
			</div><br>


	</div>


</div>
</span>



 </footer>

	    <!-- Script -->
      <script src="/js/main.js"></script>

	


	</div>
</body>
</html>
