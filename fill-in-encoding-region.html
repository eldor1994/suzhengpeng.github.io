<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="generator" content="Jekyll">

	<title>QR码编码区填充方式-Su'S Blog </title>
  <meta name="description" content="QR码编码区填充方式,包括格式信息、版本信息和数据码字和纠错码字的填充。 ">

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/css/main.css">

	<!-- RSS -->
	<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" />

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <style type="text/css">

</style>
<script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
<script>
var init = function() {
    var center = new qq.maps.LatLng(37.916527,106.397128);
	var tsingtao = new qq.maps.LatLng(36.065162,120.312567);
	var jinan = new qq.maps.LatLng(36.670966,116.990919);
	var xian = new qq.maps.LatLng(34.276936,108.962660);
	var xinan = new qq.maps.LatLng(34.718308,112.154574);
	var shanghai = new qq.maps.LatLng(31.250085,121.455917);
	var kunshan = new qq.maps.LatLng(31.366225,120.957520);
	var fengxian = new qq.maps.LatLng(34.701436,116.649528);
    var map = new qq.maps.Map(document.getElementById('container-map'),{
        center: center,
        zoom: 0
    });
	//添加到提示窗
	var info = new qq.maps.InfoWindow({
        map: map
    });
    //青岛
    var marker = new qq.maps.Marker({
        position: tsingtao,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small> <a href="/tag/tsingtao.html">山东省青岛市</a><br> <small> 28 Apr 2017</small> <a href="/tbm-and-signal-hill">青啤博物馆与信号山公园</a> <br><small> 23 Apr 2017</small> <a href="/railway-station-to-54-square">红石绿海</a> <br><small> 18 Mar 2017</small> <a href="/night-54-square">夜游五四广场</a> <br>            ');
        info.setPosition(tsingtao); 
    });
	//济南
	    var marker = new qq.maps.Marker({
        position: jinan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small> <a href="/tag/ji%27nan.html">山东省济南市</a><br>    <small> 15 Apr 2017</small> <a href="/welcome-to-the-hell">Welcome to the hell</a> <br>         ');
        info.setPosition(jinan); 
    });
	//xian
	    var marker = new qq.maps.Marker({
        position: xian,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small><a href="/tag/xi%27an.html">陕西省西安市</a><br>   <small> 31 Mar 2017</small> <a href="/roaming-xian">西安漫行</a> <br>          ');
        info.setPosition(xian); 
    });
	//xin-an
	    var marker = new qq.maps.Marker({
        position: xinan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small><a href="#">河南省新安县</a>');
        info.setPosition(xinan); 
    });
	//shanghai
	    var marker = new qq.maps.Marker({
        position: shanghai,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small><a href="#">上海市</a>');
        info.setPosition(shanghai); 
    });
	//kunshan
	    var marker = new qq.maps.Marker({
        position: kunshan,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small><a href="#">江苏省昆山市</a>');
        info.setPosition(kunshan); 
    });
	//fengxian
	    var marker = new qq.maps.Marker({
        position: fengxian,
        map: map
    });
    //获取标记
    qq.maps.event.addListener(marker, 'click', function() {
        info.open(); 
        info.setContent('<small> Location:</small><a href="#">江苏省丰县</a>');
        info.setPosition(fengxian); 
    });
	
	
}

</script>    
		</head>


<body>
	<div id="wrap">
	  	
	  	<!-- Navigation -->
	  	

<nav id="nav">

    <!-- Nav links -->
	  

  
  <!-- Nav footer 
	
	  <footer><span>

<div class="footer" id="nav-links">
<br>
 <div class="footer-ico">
</div>
<br>

Suzhengpeng @ Tsingtao 
<br>

	      
	    
	      
	        <a href="/pages/about" title="About">About</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	        <a href="/pages/contact" title="Contact">Contact</a>&nbsp;&nbsp;
	      
	    
	      
	        <a href="/pages/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;
	      
	    
	      
	        <a href="/pages/friend" title="Friends">Friends</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	        <a href="/pages/link" title="Links">Links</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
<br><br> <div class="footer-qrcode">
 <img src="http://s.jiathis.com/qrcode.php?url=http://suzhengpeng.com/fill-in-encoding-region">
 </div><br>
 <div class="footer-ico-con">
 <table><tr>
<td><a href="http://space.bilibili.com/15155880" target="_blank"><img src="/img/ico/bilibili.ico"/> </a> </td>
<td><a href="https://github.com/suzhengpeng" target="_blank"><img src="/img/ico/github.ico"/> </a> </td>
<td><a href="http://weibo.com/sdustem" target="_blank"><img src="/img/ico/weibo.ico"/> </a> </td>
<td><a href="https://www.douban.com/people/imsus/" target="_blank"><img src="/img/ico/douban.ico"/> </a> </td>
<td><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261868763'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261868763%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></td>

</tr></table>
</div>
 <div class="footer-power">
Proudly hosted by Github and powered by Jekyll </div>
<br>
<img src="/img/update/z01.jpg"/></div>
</span>



 </footer>
	-->
 <a href="/"><div class="footer-ico">
</div></a>
<br><br>
	<div id="nav-list">
		<!-- Nav pages -->
	  
	    
	  
	    
	      <a href="/pages/about" title="About">About</a>&nbsp;&nbsp;
	    
	  
	    
	  
	    
	      <a href="/pages/contact" title="Contact">Contact</a>&nbsp;&nbsp;
	    
	  
	    
	      <a href="/pages/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;
	    
	  
	    
	      <a href="/pages/friend" title="Friends">Friends</a>&nbsp;&nbsp;
	    
	  
	    
	  
	    
	      <a href="/pages/link" title="Links">Links</a>&nbsp;&nbsp;
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	    
	  
	  
	 <br> 
	 <br>Suzhengpeng @ Tsingtao<br><br>
	 <div class="footer-power">
Proudly hosted by Github and powered by Jekyll <br><br>
<img src="/img/update/z01.jpg"/></div>
    </div>


 <div class="footer-ico-con">
 <table><tr>
<td><a href="http://space.bilibili.com/15155880" target="_blank"><img src="/img/ico/bilibili.ico"/></a> </td>
<td><a href="https://github.com/suzhengpeng" target="_blank"><img src="/img/ico/github.ico"/></a> </td>
<td><a href="http://weibo.com/sdustem" target="_blank"><img src="/img/ico/weibo.ico"/></a> </td>
<td><a href="https://www.douban.com/people/imsus/" target="_blank"><img src="/img/ico/douban.ico"/></a> </td>
<td><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261868763'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261868763%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></td>
</tr></table>
</div> 

 
<br>
	</nav>
    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>

      <!-- Header -->
      
        <header id="header" class="parent justify-spaceBetween">
  <div class="inner w100 relative">
    <div class="f-logo">  
      <a href="/">
        <h1>
          <span>Su</span>'S Blog
        </h1>
      </a>
    </div>
    <span id="nav-links" class="absolute right bottom">
      <!-- Nav pages -->
	    
      
      <!-- Nav links -->
	    

    </span>
  </div>
</header>




      

    <!-- Main content -->
	  <div id="container">
		  
		<main>

			<article id="post-page">
	
	30 Apr 2017
	<h3>QR码编码区填充方式 </h3>
	<!-- JiaThis Button BEGIN -->
<div class="jiathis_style"><span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_weixin"></a>
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_fb"></a>
<a class="jiathis_button_twitter"></a>
<a class="jiathis_button_ydnote"></a>
<a class="jiathis_button_linkedin"></a>
<a href="http://www.jiathis.com/share?uid=2133390" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	summary:"",
	ralateuid:{
		"tsina":"@ShannonSS"
	},
	shortUrl:false,
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=2133390" charset="utf-8"></script>
<!-- JiaThis Button END -->
<br>
	<div class="content">

		<p>QR码的编码区包括格式信息、版本信息以及数据码字和纠错码字。</p>

<p><img src="/img/qrcode/enregion.jpg" alt="avatar" /></p>

<h3 id="格式信息的填充">格式信息的填充</h3>

<p><img src="/img/qrcode/forinfoposition.jpg" alt="avatar" /></p>

<p><strong><center>格式信息位置</center></strong></p>

<p>格式信息位共有15位，包括：5个数据位和10个用BCH（15,5）编码计算得到的纠错位。数据位的前两位是纠错等级指示符。第三到五位是为数据掩模图形参考（the data mask pattern reference）</p>

<table>
  <thead>
    <tr>
      <th>纠错等级</th>
      <th>L</th>
      <th>M</th>
      <th>Q</th>
      <th>H</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>二进制</td>
      <td>01</td>
      <td>00</td>
      <td>11</td>
      <td>10</td>
    </tr>
  </tbody>
</table>

<p><strong>Table 1 纠错等级指示符</strong></p>

<table>
  <thead>
    <tr>
      <th>掩模图形参考</th>
      <th>掩模图形</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>000</td>
      <td>(i+j) mod 2=0</td>
    </tr>
    <tr>
      <td>001</td>
      <td>i mod 2=0</td>
    </tr>
    <tr>
      <td>010</td>
      <td>j mod 3=0</td>
    </tr>
    <tr>
      <td>011</td>
      <td>(i+j) mod 3=0</td>
    </tr>
    <tr>
      <td>100</td>
      <td>((i div 2)+(j div 3)) mod 2=0</td>
    </tr>
    <tr>
      <td>101</td>
      <td>(i j) mod 2 + (i j) mod 3=0</td>
    </tr>
    <tr>
      <td>110</td>
      <td>((i j) mod 2 + (i j) mod 3) mod 2=0</td>
    </tr>
    <tr>
      <td>111</td>
      <td>((i j) mod 3 + (i j) mod 2) mod 2=0</td>
    </tr>
  </tbody>
</table>

<p><strong>Table 2 掩模图形</strong></p>

<p><strong>纠错位的计算</strong></p>

<blockquote>
  <p><strong>例：</strong> <br />
设：纠错等级为M(二进制符=00)；掩模图形参考=101 <br />
则：5个数据位为：00101 <br />
纠错位的计算： <br />
以数据位为系数的生成多项式为：x<sup>2</sup>+1 <br />
将系数升至10(=15-5)：x<sup>12</sup>+x<sup>10</sup> <br />
被G(x)=x<sup>10</sup>+x<sup>8</sup>+x<sup>5</sup>+x<sup>4</sup>+x<sup>2</sup>+x+1 除：=(x<sup>10</sup>+x<sup>8</sup>+x<sup>5</sup>+x<sup>4</sup>+x<sup>2</sup>+x+1)x<sup>2</sup>+(x<sup>7</sup>+x<sup>6</sup>+x<sup>4</sup>+x<sup>3</sup>+x<sup>2</sup>) <br />
则剩余多项式为：x<sup>7</sup>+x<sup>6</sup>+x<sup>4</sup>+x<sup>3</sup>+x<sup>2</sup> <br />
系数为：00110 11100 <br />
格式信息数据串为：00101 00110 11100 <br />
用掩模图形进行XOR运算：10101 00000 10010 <br />
结果为：10000 00110 01110 <br /></p>
</blockquote>

<p><strong>纠错译码</strong></p>

<p>==Wait==</p>

<h3 id="版本信息的填充">版本信息的填充</h3>

<p>版本信息位共有18位，包括：6个数据位和12个用BCH（15,5）编码计算得到的纠错位。最高位为第一位。只有版本7~40的符号包含版本信息，没有任何版本信息的结果全为0。所以不必对版本信息进行掩模。</p>

<p><img src="/img/qrcode/versioninfobitst.jpg" alt="avatar" /></p>

<p><strong><center>Table 3 版本信息位流</center></strong></p>

<p><img src="img/qrcode/versioninformation.jpg" alt="avatar" /></p>

<p><strong><center>版本信息位置</center></strong></p>

<p><strong>纠错位的计算</strong></p>

<blockquote>
  <p><strong>例：</strong> <br />
设：QR码的版本为 version 7 <br />
二进制串：0001111 <br />
将系数升至8(=16-8)：x<sup>2</sup>+x+1 <br />
被G(x)=x<sup>12</sup>+x<sup>11</sup>+x<sup>10</sup>+x<sup>9</sup>+x<sup>8</sup>+x<sup>5</sup>+x<sup>2</sup>+1 除：=(x<sup>12</sup>+x<sup>11</sup>+x<sup>10</sup>+x<sup>9</sup>+x<sup>8</sup>+x<sup>5</sup>+x<sup>2</sup>+1)x<sup>2</sup>+(x<sup>11</sup>+x<sup>10</sup>+x<sup>7</sup>+x<sup>4</sup>+x<sup>2</sup>) <br />
纠错位为：剩余多项式的系数=110 010 010 100 <br />
版本信息数据串为：000 111 110 010 010 100 <br />
计算结果如 Table 3 中的 Version</p>
</blockquote>

<p><strong>纠错译码</strong></p>

<p>==Wait==</p>

<h3 id="数据码字和纠错码字的填充">数据码字和纠错码字的填充</h3>

<p><img src="img/qrcode/chartpos.jpg" alt="avatar" /></p>

<p><strong><center>V7-H符号的符号字符布置</center></strong></p>

<p>在QR码的编码区域中，符号字符以2个模块宽的纵列从符号的右下角开始布置，并自右向左，且交替地从下向上或从上向下安排。</p>

<p>符号字符以及字符中位的布置原则，如下所列：</p>

<p>1、位序列在纵列中的位置：从右到左，向上或向下应与符号字符的布置方向一致。</p>

<p>2、每个码字的最高位(位7)应放在第一个可用的模块位置，随后的位放在下一个模块的位置。如果方向向上，则最高位占用规则符号字符的右下角的模块。如果方向向下，则最高位占用规则符号字符的右上角的字符。见下图：</p>

<p><img src="img/qrcode/chartarr1.jpg" alt="avatar" /></p>

<p>3、如果符号字符的两个模块纵列同时遇到校正图形或者定位图形的水平边界，可以在图形的上面或下面继续布置。与编码区是连续的一样。</p>

<p>4、如果遇到符号字符区域的上或下边界（即符号的边缘、格式信息、版本信息或分隔符），码字中剩余的位应改变方向放在左侧的纵列中。见下图：</p>

<p><img src="img/qrcode/chartarr2.jpg" alt="avatar" /></p>

<p>5、如果符号字符的右侧模块纵列遇到校正图形或者版本信息占用的区域，位的布置形成不规则排列的符号字符，沿着相邻校正图形或版本信息的单个模块纵列延伸。如果字符在可用于下一个字符的两列纵列之前结束，则下一个符号字符的首位放在单个纵列之中。见下图</p>

<p><img src="img/qrcode/chartarr3.jpg" alt="avatar" /></p>

<p><strong>另外一种方案：</strong></p>

<p>将整个码字序列视为一个单独的位流，将其从最高位开始按从右向左，自下而上（或自上而下）的方向交替布置于两个模块宽的纵列中。并跳过功能图形占用的区域，在纵列的顶部或底部改变方向，每一位应放在第一个可用的位置。</p>

<p><strong>备注：</strong></p>

<p>当符号的数据容量不能恰好分为整数个八位符号字符时，要用相应的剩余位（3、4 或 7）填满符号的容量。</p>

		
	</div>


	
	<div id="posts-out-tags"># <a href="/tag/qrcode.html" rel="tag">QRcode</a>, <a href="/tag/technology.html" rel="tag">technology</a>, <a href="/tag/encode.html" rel="tag">encode</a> </div> 
	
</article>



	  </main>
		
		  <!-- Pagination links -->
      

	  </div>
	    
	    <!-- Footer -->
	    <footer><span>

<div class="footer" id="nav-links">
<br>
 <div class="footer-ico">
</div>
<br>

Suzhengpeng @ Tsingtao 
<br>

	      
	    
	      
	        <a href="/pages/about" title="About">About</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	        <a href="/pages/contact" title="Contact">Contact</a>&nbsp;&nbsp;
	      
	    
	      
	        <a href="/pages/copyright" title="Copyright">Copyright</a>&nbsp;&nbsp;
	      
	    
	      
	        <a href="/pages/friend" title="Friends">Friends</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	        <a href="/pages/link" title="Links">Links</a>&nbsp;&nbsp;
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
	      
	    
<br><br> <div class="footer-qrcode">
 <img src="http://s.jiathis.com/qrcode.php?url=http://suzhengpeng.com/fill-in-encoding-region">
 </div><br>
 <div class="footer-ico-con">
 <table><tr>
<td><a href="http://space.bilibili.com/15155880" target="_blank"><img src="/img/ico/bilibili.ico"/> </a> </td>
<td><a href="https://github.com/suzhengpeng" target="_blank"><img src="/img/ico/github.ico"/> </a> </td>
<td><a href="http://weibo.com/sdustem" target="_blank"><img src="/img/ico/weibo.ico"/> </a> </td>
<td><a href="https://www.douban.com/people/imsus/" target="_blank"><img src="/img/ico/douban.ico"/> </a> </td>
<td><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261868763'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261868763%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script></td>

</tr></table>
</div>
 <div class="footer-power">
Proudly hosted by Github and powered by Jekyll </div>
<br>
<img src="/img/update/z01.jpg"/></div>
</span>



 </footer>

	    <!-- Script -->
      <script src="/js/main.js"></script>

	


	</div>
</body>
</html>
